CREATE SCHEMA ecommerce;

//table to store user information
CREATE TABLE ecommerce.user (
user_id SERIAL NOT NULL PRIMARY KEY,
user_name VARCHAR(56) NOT NULL,
password VARCHAR(56) NOT NULL,
billing_address VARCHAR(56) NOT NULL,
billing_city TEXT NOT NULL,
billing_state TEXT NOT NULL,
billing_zip INT NOT NULL,
billing_phone VARCHAR(15) NOT NULL,
display_name VARCHAR(56) NOT NULL
);

//table for store locations
CREATE TABLE ecommerce.location (
location_id SERIAL NOT NULL PRIMARY KEY,
location_name VARCHAR(56) NOT NULL,
location_address VARCHAR(56) NOT NULL,
location_city TEXT NOT NULL,
location_state TEXT NOT NULL,
location_zip INT NOT NULL,
location_phone VARCHAR(15) NOT NULL
);

//tables for items sold in store
CREATE TABLE ecommerce.item (
item_id SERIAL NOT NULL PRIMARY KEY,
item_name TEXT NOT NULL,
item_price DECIMAL(8, 2) NOT NULL,
item_description VARCHAR(255) NOT NULL,
);

//tables for customer reviews
CREATE TABLE ecommerce.review (
review_id SERIAL NOT NULL PRIMARY KEY,
user_id INT NOT NULL REFERENCES ecommerce.user(user_id),
rating SMALLINT NOT NULL CHECK (0<rating AND rating<=5),
title TEXT NOT NULL,
content TEXT NOT NULL,
timestamp TIMESTAMP(6)
);

CREATE TABLE ecommerce.channel (
channel_id SERIAL NOT NULL PRIMARY KEY,
item_id INT NOT NULL REFERENCES ecommerce.item(item_id),
review_id INT NOT NULL REFERENCES ecommerce.review(review_id)
);

ALTER TABLE ecommerce.item 
 ADD channel_id INT NOT NULL 
 REFERENCES ecommerce.channel(channel_id);


